<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="co2signal" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="http://eclipse.org/smarthome/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="http://eclipse.org/smarthome/schemas/thing-description/v1.0.0 http://eclipse.org/smarthome/schemas/thing-description-1.0.0.xsd">

	<!-- CO2 Signal Thing -->
	<thing-type id="co2signal">
		<label>CO2 Signal</label>
		<description>
		Provides information about the CO2 intensity of produced electricity of a given location.
		In order to receive the data, you must register an account on https://www.co2signal.com/ and get your API token.
        </description>

		<channels>
            <channel id="countryCode" typeId="countryCode" />
			<channel id="carbonIntensity" typeId="carbonIntensity" />
			<channel id="fossilFuelPercentage" typeId="fossilFuelPercentage" />
		</channels>

		<config-description>
			<parameter name="apikey" type="text" required="true">
				<context>password</context>
				<label>API Key</label>
				<description>Data-platform token to access the www.co2signal.com service</description>
			</parameter>
			<parameter name="location" type="text" required="false"
				pattern="^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)[,]\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$">
				<label>Location</label>
				<description>Your geo coordinates separated with comma (e.g. "37.8,-122.4").</description>
			</parameter>
			<parameter name="countryCode" type="text" required="false">
				<label>Country Code</label>
				<description>two-letter iso country code, retrieves the last known state of a country, if you are too lazy to use a geo coordinate</description>
			</parameter>
			<parameter name="refresh" type="integer" min="1" required="false">
				<label>Refresh interval</label>
				<description>Specifies the refresh interval in minutes.</description>
				<default>10</default>
			</parameter>
		</config-description>
	</thing-type>

	<channel-type id="countryCode">
		<item-type>String</item-type>
		<label>Country Code</label>
		<description>two-letter iso country code</description>
		<category>Country Code</category>
		<state readOnly="true" pattern="%s"></state>
	</channel-type>

	<channel-type id="carbonIntensity">
		<item-type>Number</item-type>
		<label>Carbon Intensity</label>
		<description>Carbon Intensity</description>
		<category>Carbon Intensity</category>
		<state readOnly="true" pattern="%.1f gCO2eq/kWh"></state>
	</channel-type>

	<channel-type id="fossilFuelPercentage">
		<item-type>Number</item-type>
		<label>Fossil Fuel Percentage</label>
		<description>Fossil Fuel Percentage</description>
		<category>Fossil Fuel Percentage</category>
		<state readOnly="true" pattern="%.1f"></state>
	</channel-type>

</thing:thing-descriptions>

